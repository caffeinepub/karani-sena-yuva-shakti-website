{
  "kind": "build_request",
  "title": "Implement public admission form with father's name field, unique ID generation, and printable admission card",
  "projectName": "Karani Sena Yuva Shakti",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-22",
      "text": "Update the backend admission form submission function to allow anonymous (unauthenticated) users to submit admission forms by removing the authorization check that currently blocks anonymous submissions",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Making the admission form publicly accessible (no login required)"
        ]
      },
      "acceptanceCriteria": [
        "Anonymous users can successfully submit admission forms without authentication",
        "The backend submitAdmissionForm function no longer returns 'Unauthorized' errors for anonymous callers",
        "Form submissions from anonymous users are stored in the backend database"
      ]
    },
    {
      "id": "REQ-23",
      "text": "Add a 'fatherName' text field to the Candidate record type in the backend, positioned after the 'fullName' field in the data structure",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Adding \"Father's Name\" field right after the candidate's name"
        ]
      },
      "acceptanceCriteria": [
        "The Candidate type includes a fatherName field of type Text",
        "The fatherName field is stored with each admission form submission",
        "Existing candidate records are compatible with the updated schema"
      ]
    },
    {
      "id": "REQ-24",
      "text": "Implement backend logic to generate a unique 10-character admission ID for each submission in the format YYYY0-XXXXX, where YYYY is the current year, 0 is a separator digit, and XXXXX is a zero-padded 5-digit sequential serial number that increments with each submission",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Generating unique 10-character IDs in format: YYYY0-00001 (year + serial number)"
        ]
      },
      "acceptanceCriteria": [
        "Each admission form submission generates a unique ID in format YYYY0-XXXXX (e.g., '20240-00001', '20240-00002')",
        "The serial number portion increments sequentially starting from 00001",
        "The year portion uses the current year at time of submission",
        "The unique ID is stored with the candidate's submission data",
        "The backend returns the generated unique ID to the frontend after successful submission"
      ]
    },
    {
      "id": "REQ-25",
      "text": "Update the frontend admission form page to include a 'Father's Name' text input field positioned immediately after the 'Full Name' field, with appropriate validation requiring this field to be filled before submission",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Adding \"Father's Name\" field right after the candidate's name"
        ]
      },
      "acceptanceCriteria": [
        "The admission form displays a 'Father's Name' input field after the 'Full Name' field",
        "The father's name field is required and validated before form submission",
        "The father's name value is included in the submission payload sent to the backend"
      ]
    },
    {
      "id": "REQ-26",
      "text": "Create a printable admission card component that displays immediately after successful form submission, showing the candidate's generated unique ID, full name, father's name, date of birth, mobile number, uploaded photo, and submission date in a card-style layout optimized for printing",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Displaying the ID immediately after submission with a printable card"
        ]
      },
      "acceptanceCriteria": [
        "After form submission, a printable admission card appears on screen",
        "The card displays the unique 10-character admission ID prominently",
        "The card includes all candidate details: full name, father's name, date of birth, mobile number, and uploaded photo",
        "The card layout is styled for printing with appropriate dimensions and formatting",
        "The card includes a print button that triggers the browser's print dialog"
      ]
    },
    {
      "id": "REQ-27",
      "text": "Update the admin panel's 'View Submissions' section to display the unique admission ID for each candidate submission in the accordion list view",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Storing all submission data including the unique ID in the admin panel"
        ]
      },
      "acceptanceCriteria": [
        "The admin submissions list displays the unique admission ID for each candidate",
        "The unique ID is prominently visible in the candidate details view",
        "Admins can easily identify and reference submissions by their unique ID"
      ]
    }
  ],
  "constraints": [
    "Maintain the single-actor backend architecture with all logic in backend/main.mo",
    "Do not modify immutable frontend paths: hooks/useInternetIdentity.ts, hooks/useActor.ts, main.tsx, components/ui",
    "Preserve existing admin authentication and authorization system",
    "Ensure the unique ID generation is sequential and does not skip numbers",
    "The year portion of the unique ID must use the current year at time of submission"
  ],
  "nonGoals": [
    "Modifying the existing admin management functionality",
    "Changing the photo gallery or news management features",
    "Adding authentication requirements to the admission form",
    "Implementing annual reset of serial numbers",
    "Creating separate admission card download/export functionality beyond browser printing"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}